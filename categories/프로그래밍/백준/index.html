
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="푹신푹신 후와후와">
    <title>Category: 백준 - 푹신푹신 후와후와</title>
    <meta name="author" content="Youngseok Choe">
    
        <meta name="keywords" content="mathematics,computer science,">
    
    
        <link rel="icon" href="https://3-24.github.io/assets/images/fav.ico">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <script type="application/ld+json">{}</script>
    <meta name="keywords" content="mathematics,computer science">
<meta property="og:type" content="blog">
<meta property="og:title" content="푹신푹신 후와후와">
<meta property="og:url" content="https://3-24.github.io/categories/프로그래밍/백준/index.html">
<meta property="og:site_name" content="푹신푹신 후와후와">
<meta property="og:locale" content="ko">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="푹신푹신 후와후와">
    
    
        
    
    
        <meta property="og:image" content="https://3-24.github.io/assets/images/profile02.jpg">
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/all.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="/assets/css/thumbs.css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css">
    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-90928447-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-90928447-2');
    </script>


    
    <!--autocanonical-->
    <link rel="canonical" href="https://3-24.github.io/categories/프로그래밍/백준/">

</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">푹신푹신 후와후와</a>
    </div>
    
        
            <a class="header-right-picture " href="#about">
        
        
            <img class="header-picture" src="/assets/images/profile02.jpg" alt="Author&#39;s picture">
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/profile02.jpg" alt="Author&#39;s picture">
                </a>
                <h4 class="sidebar-profile-name">Youngseok Choe</h4>
                
                    <h5 class="sidebar-profile-bio"><p>수학과 개발을 오가는 자유로운 학부생입니다.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/ " title="Home">
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-categories" title="Categories">
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags" title="Tags">
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-archives" title="Archives">
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link open-algolia-search" href="#search" title="Search">
                    
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="#about" title="About">
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/3-24" target="_blank" rel="external nofollow noopener noreferrer" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="http://stackoverflow.com/10366230" target="_blank" rel="external nofollow noopener noreferrer" title="Stack Overflow">
                    
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://www.facebook.com/profile.php?id=100010703071923" target="_blank" rel="external nofollow noopener noreferrer" title="Facebook">
                    
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="mailto:yschoelife@gmail.com" target="_blank" rel="external nofollow noopener noreferrer" title="Mail">
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/atom.xml" title="RSS">
                    
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1" class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2019/01/28/BOJ-submit-bot/">
                            Python을 이용한 백준 자동 소스 제출 봇 만들기
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-01-28T07:43:26+09:00">
	
		    1월 28, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/프로그래밍/">프로그래밍</a>, <a class="category-link" href="/categories/프로그래밍/백준/">백준</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="table-of-contents">Table of Contents</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Requirements"><span class="toc-text">Requirements</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#로그인"><span class="toc-text">로그인</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#로그인하기"><span class="toc-text">로그인하기</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#로그인-확인하기-optional"><span class="toc-text">로그인 확인하기(optional)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#소스-제출"><span class="toc-text">소스 제출</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#테스트-소스-준비하기"><span class="toc-text">테스트 소스 준비하기</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#테스트-소스-제출해보기"><span class="toc-text">테스트 소스 제출해보기</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#결과-확인"><span class="toc-text">결과 확인</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#마무리"><span class="toc-text">마무리</span></a></li></ol>
<h2 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h2><p>제작 언어는 Python 3를 기본으로 합니다.</p>
<p>Python을 이용해 웹에 로그인이나 소스를 제출하기 위해서 requests 패키지가, 페이지 내용을 효율적으로 읽기 위한 BeautifulSoup4 패키지가 필요합니다. 해당 패키지가 없다면 (Windows 기준) cmd에서 다음을 입력하여 설치할 수 있습니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install requests</span><br><span class="line">pip install bs4</span><br></pre></td></tr></table></figure>
<p>개발에 이해를 돕는 용도로 웹 디버깅 소프트웨어인 <a href="https://www.google.com/search?q=Fiddler&amp;oq=Fiddler&amp;aqs=chrome..69i57j69i60l3.2554j0j7&amp;sourceid=chrome&amp;ie=UTF-8" rel="external nofollow noopener noreferrer" target="_blank">Fiddler</a>를 사용하면 더 좋습니다. 필수사항은 아닙니다.</p>
<h2 id="로그인"><a href="#로그인" class="headerlink" title="로그인"></a>로그인</h2><h3 id="로그인하기"><a href="#로그인하기" class="headerlink" title="로그인하기"></a>로그인하기</h3><p>백준의 로그인은 가장 기본적인 형태입니다. Fiddler를 띄우고 백준 로그인을 해보면 다음과 같은 패킷을 확인할 수 있습니다.</p>
<img src="/2019/01/28/BOJ-submit-bot/fiddler01.png" title="로그인 패킷">
<p><code>login_user_id</code>에 아이디를, <code>login_password</code>에 비밀번호를 입력하고 <a href="https://acmicpc.net/signin" rel="external nofollow noopener noreferrer" target="_blank">https://acmicpc.net/signin</a>으로 전송하는군요. 이 과정을 Python으로 작성해보면 다음과 같습니다:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">LOGIN_INFO = &#123;<span class="string">"login_user_id"</span>:<span class="string">"(아이디)"</span>, <span class="string">"login_password"</span>:<span class="string">"(비밀번호)"</span>&#125;</span><br><span class="line">boj_url = <span class="string">"https://www.acmicpc.net/"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> requests.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    sess.post(boj_url+<span class="string">'signin'</span>,data=LOGIN_INFO)</span><br></pre></td></tr></table></figure>
<p>requests 세션을 하나 만들어놓고 로그인할 때 정보를 보내는 주소에 로그인 정보를 보내면 됩니다.</p>
<h3 id="로그인-확인하기-optional"><a href="#로그인-확인하기-optional" class="headerlink" title="로그인 확인하기(optional)"></a>로그인 확인하기(optional)</h3><p>로그인이 제대로 되었는지를 확인하려면 로그인하기 전과 후에 생기는 차이를 검사해야겠죠? 백준의 경우 쿠키에 로그인 정보가 기록이 되지 않기 때문에 사이트에서 직접 찾아야 합니다.</p>
<img src="/2019/01/28/BOJ-submit-bot/chrome01.png" title="백준 로그인">
<p>개발자도구로 확인해보니 a태그의 username class에 제 아이디가 입력되어있네요. 이걸 활용해봅시다. 크롬 콘솔에서 해당 객체 이름을 검색해보면 로그인한 후는</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">var</span> d = $(<span class="string">'a.username'</span>)[<span class="number">0</span>]</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line">&gt; d</span><br><span class="line">&lt;a href=<span class="string">"/user/uncertainty"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"username"</span>&gt;uncertainty&lt;<span class="regexp">/a&gt;</span></span><br></pre></td></tr></table></figure>
<p>인데 로그인하기 전으로 돌아가서 확인하면</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; d</span><br><span class="line"><span class="literal">undefined</span></span><br></pre></td></tr></table></figure>
<p>이므로 username은 좋은 로그인 식별자가 된다는 것을 알 수 있습니다! <code>a.username</code>을 Python으로 읽어서 None인지 아닌지만 확인하면 됩니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup <span class="keyword">as</span> bs</span><br><span class="line"></span><br><span class="line">LOGIN_INFO = &#123;<span class="string">"login_user_id"</span>:<span class="string">"(아이디)"</span>, <span class="string">"login_password"</span>:<span class="string">"(비밀번호)"</span>&#125;</span><br><span class="line">boj_url = <span class="string">"https://www.acmicpc.net/"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> requests.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    sess.post(boj_url+<span class="string">'signin'</span>,data=LOGIN_INFO)</span><br><span class="line">    soup = bs(sess.get(boj_url).text, <span class="string">'html.parser'</span>)</span><br><span class="line">    <span class="keyword">if</span> soup.find(<span class="string">'a'</span>, &#123;<span class="string">'class'</span>: <span class="string">'username'</span>&#125;) <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        print(<span class="string">"Invalid login info"</span>)</span><br><span class="line">        exit(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>백준 메인주소인 acmicpc.net을 읽은 후 BeautifulSoup의 html 파서로 이렇게 확인할 수 있습니다. 로그인은 여기까지 하면 되겠군요.</p>
<h2 id="소스-제출"><a href="#소스-제출" class="headerlink" title="소스 제출"></a>소스 제출</h2><h3 id="테스트-소스-준비하기"><a href="#테스트-소스-준비하기" class="headerlink" title="테스트 소스 준비하기"></a>테스트 소스 준비하기</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> a,b;</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;a,&amp;b);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%d"</span>,a-b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>↑ 예전에 짜놓은 1001번 C++ (C) 소스</p>
<p>먼저 자동으로 제출할 소스를 준비해놓아야 합니다. 테스트용으로 저는 <a href="https://www.acmicpc.net/problem/1001" rel="external nofollow noopener noreferrer" target="_blank">1001번</a> 소스를 Python 소스와 같은 경로에 저장해놓았습니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">BOJ_bot</span><br><span class="line">└─1001.cpp</span><br><span class="line">└─main.py</span><br></pre></td></tr></table></figure>
<p>그리고 Python main.py에서 문제 번호를 저장하고 소스도 미리 읽어놓는 코드를 로그인 전에 넣어놓습니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup <span class="keyword">as</span> bs</span><br><span class="line"></span><br><span class="line">LOGIN_INFO = &#123;<span class="string">"login_user_id"</span>:<span class="string">"(아이디)"</span>, <span class="string">"login_password"</span>:<span class="string">"(비밀번호)"</span>&#125;</span><br><span class="line">boj_url = <span class="string">"https://www.acmicpc.net/"</span></span><br><span class="line"></span><br><span class="line">problem_id = <span class="number">1001</span></span><br><span class="line">language = <span class="string">"C++14"</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"1001.cpp"</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    code = f.read()</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> requests.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    sess.post(boj_url+<span class="string">'signin'</span>,data=LOGIN_INFO)</span><br><span class="line">    soup = bs(sess.get(boj_url).text, <span class="string">'html.parser'</span>)</span><br><span class="line">    <span class="keyword">if</span> soup.find(<span class="string">'a'</span>, &#123;<span class="string">'class'</span>: <span class="string">'username'</span>&#125;) <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        print(<span class="string">"Invalid login info"</span>)</span><br><span class="line">        exit(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h3 id="테스트-소스-제출해보기"><a href="#테스트-소스-제출해보기" class="headerlink" title="테스트 소스 제출해보기"></a>테스트 소스 제출해보기</h3><p>소스를 제출할 때 패킷을 확인해볼까요?</p>
<img src="/2019/01/28/BOJ-submit-bot/chrome03.png" title="제출 화면">
<img src="/2019/01/28/BOJ-submit-bot/fiddler02.png" title="소스 제출 패킷">
<p>눈에 띄는 것은 <code>problem_id</code>는 문제번호, <code>language</code>는 제가 선택한 언어인 C++14에 해당하는 번호, <code>code_open</code>은 코드 공개여부(저는 공개가 기본 설정입니다), <code>source</code>는 소스 전문인건 알겠는데, <code>csrf_key</code>는 또 뭐람.. 킁 보안토큰같은데..</p>
<p><a href="https://stackoverflow.com/questions/5207160/what-is-a-csrf-token-what-is-its-importance-and-how-does-it-work" rel="external nofollow noopener noreferrer" target="_blank">https://stackoverflow.com/questions/5207160/what-is-a-csrf-token-what-is-its-importance-and-how-does-it-work</a></p>
<p>여기 좋은 설명이 있는 것 같아서 대체합니다. 소스 제출의 부정사용 방지로 보이네요. 그러니까 이 글의 링크 중 하나에 백준에 틀린 소스를 제출하는 것을 심어놓으면 여러분의 백준 정답률을 떨구는 효과를 기대할 수 있습니다(!!). 그런거 막아주는 거에요.</p>
<img src="/2019/01/28/BOJ-submit-bot/chrome02.png" title="csrf_key 값">
<p><code>csrf_key</code>는 제출 사이트의 html을 확인해보니까 hidden으로 감춰져있던 것이 모습을 드러내줍니다. 이걸 받아서 쓰면 되겠군요! input 태그 안에서 name으로 찾아주면 됩니다. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">	key = soup.find(<span class="string">'input'</span>, &#123;<span class="string">'name'</span>: <span class="string">'csrf_key'</span>&#125;)[<span class="string">'value'</span>]</span><br><span class="line"><span class="keyword">except</span> TypeError:</span><br><span class="line">	print(<span class="string">"Wrong problem number"</span>)</span><br><span class="line">	exit(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p><code>language</code>의 번호도 언어 선택창을 html로 읽어보면 확인할 수 있습니다.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"language"</span> <span class="attr">name</span>=<span class="string">"language"</span> <span class="attr">data-placeholder</span>=<span class="string">"언어를 선택해 주세요."</span> <span class="attr">class</span>=<span class="string">"language-select col-md-2 chosen-select"</span> <span class="attr">data-no_results_text</span>=<span class="string">"없는 언어 입니다."</span> <span class="attr">style</span>=<span class="string">"display: none;"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"88"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-c++src"</span>&gt;</span>C++14<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"3"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-java"</span>&gt;</span>Java<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"28"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-python"</span> <span class="attr">selected</span>=<span class="string">""</span>&gt;</span>Python 3<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"75"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-csrc"</span>&gt;</span>C11<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"73"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-python"</span>&gt;</span>PyPy3<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"0"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-csrc"</span>&gt;</span>C<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"1"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-c++src"</span>&gt;</span>C++<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"49"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-c++src"</span>&gt;</span>C++11<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"84"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-c++src"</span>&gt;</span>C++17<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"91"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-java"</span>&gt;</span>Java (OpenJDK)<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"93"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-java"</span>&gt;</span>Java 11<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"6"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-python"</span>&gt;</span>Python 2<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"32"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-python"</span>&gt;</span>PyPy2<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"68"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-ruby"</span>&gt;</span>Ruby 2.5<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"69"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-kotlin"</span>&gt;</span>Kotlin (JVM)<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"92"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-kotlin"</span>&gt;</span>Kotlin (Native)<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"74"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-swift"</span>&gt;</span>Swift<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"58"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>Text<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"62"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-csharp"</span>&gt;</span>C# 6.0<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"17"</span> <span class="attr">data-mime</span>=<span class="string">"text/javascript"</span>&gt;</span>node.js<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"12"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-go"</span>&gt;</span>Go<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"29"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-d"</span>&gt;</span>D<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"37"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-fsharp"</span>&gt;</span>F#<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"7"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-php"</span>&gt;</span>PHP<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"44"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>Rust<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"2"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-pascal"</span>&gt;</span>Pascal<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"16"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-lua"</span>&gt;</span>Lua<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"8"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-perl"</span>&gt;</span>Perl<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"72"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-rsrc"</span>&gt;</span>R<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"10"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-objectivec"</span>&gt;</span>Objective-C<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"64"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-objectivec"</span>&gt;</span>Objective-C++<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"59"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-csrc"</span>&gt;</span>C (Clang)<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"60"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-c++src"</span>&gt;</span>C++ (Clang)<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"66"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-c++src"</span>&gt;</span>C++11 (Clang)<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"67"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-c++src"</span>&gt;</span>C++14 (Clang)<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"77"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-csrc"</span>&gt;</span>C11 (Clang)<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"85"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-c++src"</span>&gt;</span>C++17 (Clang)<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"79"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>Golfscript<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"27"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>Assembly (32bit)<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"87"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>Assembly (64bit)<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"63"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-vb"</span>&gt;</span>VB.NET 4.0<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"5"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-sh"</span>&gt;</span>Bash<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"13"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-fortran"</span>&gt;</span>Fortran<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"14"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-scheme"</span>&gt;</span>Scheme<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"19"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>Ada<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"21"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>awk<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"22"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-ocaml"</span>&gt;</span>OCaml<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"23"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-brainfuck"</span>&gt;</span>Brainfuck<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"24"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>Whitespace<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"26"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-tcl"</span>&gt;</span>Tcl<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"34"</span> <span class="attr">data-mime</span>=<span class="string">"text/javascript"</span>&gt;</span>Rhino<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"35"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-cobol"</span>&gt;</span>Cobol<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"41"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-c++src"</span>&gt;</span>Pike<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"43"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>sed<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"46"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>Boo<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"47"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>Intercal<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"48"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>bc<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"53"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>Nemerle<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"54"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>Cobra<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"70"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>Algol 68<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"71"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>Befunge<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"81"</span> <span class="attr">data-mime</span>=<span class="string">"text/x-haxe"</span>&gt;</span>Haxe<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"82"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>LOLCODE<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"83"</span> <span class="attr">data-mime</span>=<span class="string">"text/plain"</span>&gt;</span>아희<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>여기서 필요한 것으로 dictionary를 만들어 관리하면 되겠습니다. 저는 C++14와 Python 3만 사용하니 그 두 개만 만들었습니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LANG = &#123;<span class="string">"C++14"</span>:<span class="number">88</span>, <span class="string">"Python 3"</span>:<span class="number">28</span>&#125;</span><br></pre></td></tr></table></figure>
<p>지금까지 모은 제출 정보들을 dictionary로 모아서 제출하면 됩니다. <code>code_open</code>의 onlyaccepted는 ‘맞았을 때만 공개’ 옵션입니다. 위 패킷에서 읽은 주소 형태가 /submit/1001 이었죠? 그 주소 그대로 세션의 post에 사용하면 됩니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> language <span class="keyword">not</span> <span class="keyword">in</span> LANG:</span><br><span class="line">    print(<span class="string">"Invalid language"</span>)</span><br><span class="line">    exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">'problem_id'</span>: problem_id,</span><br><span class="line">    <span class="string">'source'</span>: code,</span><br><span class="line">    <span class="string">'language'</span>: LANG[language],</span><br><span class="line">    <span class="string">'code_open'</span>: <span class="string">'onlyaccepted'</span>,</span><br><span class="line">    <span class="string">'csrf_key'</span>: key</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sess.post(boj_url + <span class="string">'/submit/'</span> + str(problem_id), data=data)</span><br></pre></td></tr></table></figure>
<p>지금까지 작성한 Python 소스를 정리하면 다음과 같습니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup <span class="keyword">as</span> bs</span><br><span class="line"></span><br><span class="line">LOGIN_INFO = &#123;<span class="string">"login_user_id"</span>:<span class="string">"(아이디)"</span>, <span class="string">"login_password"</span>:<span class="string">"(비밀번호)"</span>&#125;</span><br><span class="line">boj_url = <span class="string">"https://www.acmicpc.net/"</span></span><br><span class="line">LANG = &#123;<span class="string">"C++14"</span>:<span class="number">88</span>, <span class="string">"Python 3"</span>:<span class="number">28</span>&#125;</span><br><span class="line"></span><br><span class="line">problem_id = <span class="number">1001</span></span><br><span class="line">language = <span class="string">"C++14"</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"1001.cpp"</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    code = f.read()</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> requests.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    sess.post(boj_url+<span class="string">'signin'</span>,data=LOGIN_INFO)</span><br><span class="line"></span><br><span class="line">    soup = bs(sess.get(boj_url).text, <span class="string">'html.parser'</span>)</span><br><span class="line">    <span class="keyword">if</span> soup.find(<span class="string">'a'</span>, &#123;<span class="string">'class'</span>: <span class="string">'username'</span>&#125;) <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        print(<span class="string">"invalid login info"</span>)</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    soup = bs(sess.get(boj_url + <span class="string">'submit/'</span> + str(problem_id)).text, <span class="string">'html.parser'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        key = soup.find(<span class="string">'input'</span>, &#123;<span class="string">'name'</span>: <span class="string">'csrf_key'</span>&#125;)[<span class="string">'value'</span>]</span><br><span class="line">    <span class="keyword">except</span> TypeError:</span><br><span class="line">        print(<span class="string">"Wrong problem number"</span>)</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> language <span class="keyword">not</span> <span class="keyword">in</span> LANG:</span><br><span class="line">        print(<span class="string">"Invalid language"</span>)</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">'problem_id'</span>: problem_id,</span><br><span class="line">        <span class="string">'source'</span>: code,</span><br><span class="line">        <span class="string">'language'</span>: LANG[language],</span><br><span class="line">        <span class="string">'code_open'</span>: <span class="string">'onlyaccepted'</span>,</span><br><span class="line">        <span class="string">'csrf_key'</span>: key</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sess.post(boj_url + <span class="string">'/submit/'</span> + str(problem_id), data=data)</span><br></pre></td></tr></table></figure>
<h2 id="결과-확인"><a href="#결과-확인" class="headerlink" title="결과 확인"></a>결과 확인</h2><p>이제 막바지입니다. 제출할 일도 없어서 쉬운 것만 남았네요. 어떻게 ‘채점이 종료되었다’는 것을 확인할 것인지를 생각해보아야 합니다. 관찰이 필요한 부분이죠.</p>
<p>먼저 제출하고 채점을 기다릴 때를 확인해보았습니다.</p>
<img src="/2019/01/28/BOJ-submit-bot/chrome04.png" title="채점 대기">
<p>저 ‘기다리는 중’이라는 상태 메시지의 html은 다음과 같습니다:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"result-text"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"result-wait"</span>&gt;</span>기다리는 중<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>채점 중일 때는 다음과 같습니다:</p>
<img src="/2019/01/28/BOJ-submit-bot/chrome06.png" title="채점 중">
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"result-text"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"result-judging"</span>&gt;</span>채점 중 (6%, 11초)<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>채점이 완료되었을 때는 어떨까요?</p>
<img src="/2019/01/28/BOJ-submit-bot/chrome05.png" title="채점 완료">
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"result-text"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"result-ac"</span>&gt;</span>맞았습니다!!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>class의 이름이 바뀌면서 채점 결과가 들어갑니다. 즉, “result-ac”가 None이면 아직 채점이 중이라는 뜻이에요. 이를 이용해 채점이 완료되었는지를 식별할 수 있습니다. 이를 이용해 while문을 탈출해주면 되겠습니다. 콘솔에 한 줄로 출력하기 위해 <code>\r</code>을 적극적으로 사용했습니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    url = boj_url + <span class="string">'/status?from_mine=1&amp;problem_id='</span> + str(problem_id) + <span class="string">'&amp;user_id'</span> + LOGIN_INFO[<span class="string">"login_user_id"</span>]</span><br><span class="line">    soup = bs(sess.get(url).text, <span class="string">'html.parser'</span>)</span><br><span class="line">    status = soup.find(<span class="string">'span'</span>, &#123;<span class="string">'class'</span>: <span class="string">'result-text'</span>&#125;).find(<span class="string">'span'</span>).string.strip()</span><br><span class="line">    result = soup.find(<span class="string">'span'</span>, &#123;<span class="string">'class'</span>: <span class="string">'result-ac'</span>&#125;)</span><br><span class="line">    <span class="keyword">if</span> result <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    print(<span class="string">'\r                      '</span>,end=<span class="string">''</span>)</span><br><span class="line">    print(<span class="string">'\r%s'</span> % status, end=<span class="string">''</span>)</span><br><span class="line"></span><br><span class="line">print()</span><br></pre></td></tr></table></figure>
<h2 id="마무리"><a href="#마무리" class="headerlink" title="마무리"></a>마무리</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup <span class="keyword">as</span> bs</span><br><span class="line"></span><br><span class="line">LOGIN_INFO = &#123;<span class="string">"login_user_id"</span>:<span class="string">"(아이디)"</span>, <span class="string">"login_password"</span>:<span class="string">"(비밀번호)"</span>&#125;</span><br><span class="line">boj_url = <span class="string">"https://www.acmicpc.net/"</span></span><br><span class="line">LANG = &#123;<span class="string">"C++14"</span>:<span class="number">88</span>, <span class="string">"Python 3"</span>:<span class="number">28</span>&#125;</span><br><span class="line"></span><br><span class="line">problem_id = <span class="number">1001</span></span><br><span class="line">language = <span class="string">"C++14"</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"1001.cpp"</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    code = f.read()</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> requests.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    sess.post(boj_url+<span class="string">'signin'</span>,data=LOGIN_INFO)</span><br><span class="line"></span><br><span class="line">    soup = bs(sess.get(boj_url).text, <span class="string">'html.parser'</span>)</span><br><span class="line">    <span class="keyword">if</span> soup.find(<span class="string">'a'</span>, &#123;<span class="string">'class'</span>: <span class="string">'username'</span>&#125;) <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        print(<span class="string">"invalid login info"</span>)</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    soup = bs(sess.get(boj_url + <span class="string">'submit/'</span> + str(problem_id)).text, <span class="string">'html.parser'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        key = soup.find(<span class="string">'input'</span>, &#123;<span class="string">'name'</span>: <span class="string">'csrf_key'</span>&#125;)[<span class="string">'value'</span>]</span><br><span class="line">    <span class="keyword">except</span> TypeError:</span><br><span class="line">        print(<span class="string">"Wrong problem number"</span>)</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> language <span class="keyword">not</span> <span class="keyword">in</span> LANG:</span><br><span class="line">        print(<span class="string">"Invalid language"</span>)</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">'problem_id'</span>: problem_id,</span><br><span class="line">        <span class="string">'source'</span>: code,</span><br><span class="line">        <span class="string">'language'</span>: LANG[language],</span><br><span class="line">        <span class="string">'code_open'</span>: <span class="string">'onlyaccepted'</span>,</span><br><span class="line">        <span class="string">'csrf_key'</span>: key</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sess.post(boj_url + <span class="string">'/submit/'</span> + str(problem_id), data=data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        url = boj_url + <span class="string">'/status?from_mine=1&amp;problem_id='</span> + str(problem_id) + <span class="string">'&amp;user_id'</span> + LOGIN_INFO[<span class="string">"login_user_id"</span>]</span><br><span class="line">        soup = bs(sess.get(url).text, <span class="string">'html.parser'</span>)</span><br><span class="line">        status = soup.find(<span class="string">'span'</span>, &#123;<span class="string">'class'</span>: <span class="string">'result-text'</span>&#125;).find(<span class="string">'span'</span>).string.strip()</span><br><span class="line">        result = soup.find(<span class="string">'span'</span>, &#123;<span class="string">'class'</span>: <span class="string">'result-ac'</span>&#125;)</span><br><span class="line">        print(<span class="string">'\r                      '</span>,end=<span class="string">''</span>)</span><br><span class="line">        print(<span class="string">'\r%s'</span> % status, end=<span class="string">''</span>)</span><br><span class="line">        <span class="keyword">if</span> result <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    </span><br><span class="line">    print()</span><br></pre></td></tr></table></figure>
<p>지금까지 작성한 코드 전문입니다. 저는 이를 이용해 github 자동 저장이나, 운에 의지해야 하는 일부 문제들에 접근하려고 합니다. (드디어 <a href="https://www.acmicpc.net/problem/10944" rel="external nofollow noopener noreferrer" target="_blank">랜덤 게임~~</a>을 풀 수 있는 것인가!) 많은 분에게 도움이 되었으면 좋겠네요.</p>

                    
                        

                    
                    
                        <p>
                            <a href="/2019/01/28/BOJ-submit-bot/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page 1 of 1</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 Youngseok Choe. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/profile02.jpg" alt="Author&#39;s picture">
        
            <h4 id="about-card-name">Youngseok Choe</h4>
        
            <div id="about-card-bio"><p>수학과 개발을 오가는 자유로운 학부생입니다.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>KAIST 19’ UG</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br>
                Republic of Korea
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover-v1.2.0.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.fancybox.js"></script>
<script src="/assets/js/thumbs.js"></script>
<script src="/assets/js/tranquilpeak.js"></script>
<!--SCRIPTS END-->



    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML" async></script>
</body>
</html>
